.. table:: `YARN AppMaster memory Configurations`
  :widths: auto

  +--------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |                   Configuration                  |                                                                                                                                                                                                                                                                                                                                               Description                                                                                                                                                                                                                                                                                                                                              |
  +==================================================+========================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
  | ``yarn.app.mapreduce.am`` |br| ``.resource.mb``  | The amount of memory the MR AppMaster needs.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
  +--------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  | ``yarn.app.mapreduce.am`` |br| ``.command-opts`` | Java opts for the MR App Master processes. The following symbol, if present, will be interpolated: ``@taskid@`` is replaced by current ``TaskID``. Any other occurrences of '@' will go unchanged. For example, to enable verbose gc logging to a file named for the taskid in ``/tmp`` and to set the heap maximum to be a gigabyte, pass a 'value' of: ``-Xmx1024m -verbose:gc -Xloggc:/tmp/@taskid@.gc`` Usage of ``-Djava.library.path`` can cause programs to no longer function if hadoop native libraries are used. These values should instead be set as part of ``LD_LIBRARY_PATH`` in the map / reduce JVM env using the ``mapreduce.map.env`` and ``mapreduce.reduce.env`` config settings. |
  +--------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+


.. code-block:: bash

   #default is 1024m and you can go up to 3584 
   -Dyarn.app.mapreduce.am.command-opts= \
       'Xmx2048m -XX:NewRatio=8 -Djava.net.preferIPv4Stack=true' \
   #default 1536, Max - 4096. Rule of thumb - `512MB` higher than the Xmx value
   -Dyarn.app.mapreduce.am.resource.mb=2560


.. note::

   - Increase the value for the parameters only at the job level (e.g for map reduce jobs use jvm parameters ``-Dmapreduce.job.split.metainfo.maxsize=_____`` |br|
   - Always increase in 512mb steps and leave headroom for native memory. 


.. table:: `Memory Configuration Settings for Job`
  :widths: auto

  +--------------------------------+--------------------------------------------------------------------------------------------------------------+
  |            PROPERTY            |                                                  DESCRIPTION                                                 |
  +================================+==============================================================================================================+
  | ``mapreduce.map.memory.mb``    | The amount of physical memory that your YARN map process can use.                                            |
  +--------------------------------+--------------------------------------------------------------------------------------------------------------+
  | ``mapreduce.reduce.memory.mb`` | The amount of physical memory that your YARN reduce process can use.                                         |
  +--------------------------------+--------------------------------------------------------------------------------------------------------------+
  | ``mapreduce.map.java.opts``    | Used to configure the heap size for the map JVM process. Should be 80% of ``mapreduce.map.memory.mb``.       |
  +--------------------------------+--------------------------------------------------------------------------------------------------------------+
  | ``mapreduce.reduce.java.opts`` | Used to configure the heap size for the reduce JVM process. Should be 80% of ``mapreduce.reduce.memory.mb``. |
  +--------------------------------+--------------------------------------------------------------------------------------------------------------+
<?xml version="1.0" encoding="UTF-8"?>

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<groupId>yahoo.yinst.yjava_jetty</groupId>
	<artifactId>yjava_jetty</artifactId>
	<name>yjava_jetty</name>
	<description>Java Bouncer Cookie/Crumb Library</description>
	<version>${jetty.version}_${yahoo.version}.${build}</version>
	<url>http://twiki.corp.yahoo.com/view/JavaPlatform</url>
	<parent>
		<groupId>yahoo.yinst.java_base_build</groupId>
		<artifactId>java_base_build</artifactId>
		<version>3.1.6.183</version>
	</parent>

	<properties>
		<bug.component>yjava_jetty</bug.component>
		<scm.path>yahoo/yjava/yinfra/yjava_jetty/trunk</scm.path>
		<mailingList.name>java-platform-devel</mailingList.name>
		<jetty.version>9.0.6.v20130930</jetty.version>
		<npn-boot.version>1.1.6.v20130911</npn-boot.version>
		<yahoo.version>0</yahoo.version>
		<slf4j_version>1.6.6</slf4j_version>
		<min_jdk_version>1.7</min_jdk_version>
		<source_jdk_version>1.7</source_jdk_version>
		<target_jdk_version>1.7</target_jdk_version>
	</properties>

	<scm>
		<developerConnection>scm:git:git@git.corp.yahoo.com:JavaPlatform/yjava_jetty.git</developerConnection>
		<url>https://git.corp.yahoo.com/JavaPlatform/yjava_jetty</url>
	</scm>

	<dependencies>
		<dependency>
			<groupId>commons-logging</groupId>
			<artifactId>commons-logging</artifactId>
			<version>1.1.1</version>
		</dependency>

		<dependency>
			<groupId>yahoo.yinst.bouncer_auth_java</groupId>
			<artifactId>bouncer_auth_java</artifactId>
			<version>0.9.83</version>
		</dependency>

		<dependency>
			<groupId>yahoo.yinst.yjava_cookie_data_servlet_filter</groupId>
			<artifactId>yjava_cookie_data_servlet_filter</artifactId>
			<version>0.6.53</version>
		</dependency>

		<dependency>
			<groupId>yahoo.yinst.yjava_bcookie</groupId>
			<artifactId>yjava_bcookie</artifactId>
			<version>1.8.130</version>
		</dependency>
		<dependency>
			<groupId>yahoo.yinst.yjava_byauth</groupId>
			<artifactId>yjava_byauth</artifactId>
			<version>0.9.643</version>
		</dependency>
		<dependency>
			<groupId>yahoo.yinst.yjava_daemon</groupId>
			<artifactId>yjava_daemon</artifactId>
			<version>2.14.83</version>
		</dependency>
		<dependency>
			<groupId>yahoo.yinst.yjava_filter_logic</groupId>
			<artifactId>yjava_filter_logic</artifactId>
			<version>0.29.242</version>
		</dependency>
		<dependency>
			<groupId>yahoo.yinst.yjava_ycore</groupId>
			<artifactId>yjava_ycore</artifactId>
			<version>0.9.125</version>
		</dependency>
		<dependency>
			<groupId>yahoo.yinst.yjava_yca</groupId>
			<artifactId>yjava_yca</artifactId>
			<version>0.23.218</version>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>yahoo.yinst.yjava_remote_ip_servlet_filter</groupId>
			<artifactId>yjava_remote_ip_servlet_filter</artifactId>
			<version>0.7.92</version>
		</dependency>
		<dependency>
			<groupId>yahoo.yinst.yjava_resource_handler</groupId>
			<artifactId>yjava_resource_handler</artifactId>
			<version>1.0.21</version>
		</dependency>
		<dependency>
			<groupId>yahoo.yinst.yjava_servlet</groupId>
			<artifactId>yjava_servlet</artifactId>
			<version>0.9.51</version>
		</dependency>
		<dependency>
			<groupId>yahoo.yinst.yjava_servlet_filters</groupId>
			<artifactId>yjava_servlet_filters</artifactId>
			<version>0.26.537</version>
		</dependency>
		<dependency>
			<groupId>yahoo.yinst.yjava_yck</groupId>
			<artifactId>yjava_yck</artifactId>
			<version>0.6.38</version>
		</dependency>
		<dependency>
			<groupId>yahoo.yinst.yjava_yhdrs</groupId>
			<artifactId>yjava_yhdrs</artifactId>
			<version>0.12.187</version>
		</dependency>
		<dependency>
			<groupId>yahoo.yinst.yjava_yiv</groupId>
			<artifactId>yjava_yiv</artifactId>
			<version>0.5.105</version>
		</dependency>
		<dependency>
			<groupId>yahoo.yinst.yjava_yiv_servlet</groupId>
			<artifactId>yjava_yiv_servlet</artifactId>
			<version>2.0.0.56</version>
		</dependency>
		<dependency>
			<groupId>yahoo.yinst.yjava_ynet</groupId>
			<artifactId>yjava_ynet</artifactId>
			<version>0.12.109</version>
		</dependency>
		<dependency>
			<groupId>yahoo.yinst.yjava_ysecure</groupId>
			<artifactId>yjava_ysecure</artifactId>
			<version>1.15.88</version>
		</dependency>
		<dependency>
			<groupId>yahoo.yinst.yjava_ysecure_native</groupId>
			<artifactId>yjava_ysecure_native</artifactId>
			<version>1.15.175</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty</groupId>
			<artifactId>jetty-client</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty</groupId>
			<artifactId>jetty-deploy</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty.websocket</groupId>
			<artifactId>websocket-server</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty.websocket</groupId>
			<artifactId>websocket-client</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty.spdy</groupId>
			<artifactId>spdy-http-server</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty</groupId>
			<artifactId>jetty-jmx</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty</groupId>
			<artifactId>jetty-plus</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty</groupId>
			<artifactId>jetty-annotations</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty</groupId>
			<artifactId>jetty-util</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty</groupId>
			<artifactId>jetty-jaspi</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty</groupId>
			<artifactId>jetty-jndi</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty</groupId>
			<artifactId>jetty-rewrite</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty</groupId>
			<artifactId>jetty-servlets</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty</groupId>
			<artifactId>jetty-plus</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty</groupId>
			<artifactId>jetty-annotations</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty</groupId>
			<artifactId>jetty-jaas</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty.websocket</groupId>
			<artifactId>websocket-server</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty</groupId>
			<artifactId>jetty-jndi</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<dependency>
			<groupId>org.eclipse.jetty</groupId>
			<artifactId>jetty-jsp</artifactId>
			<version>${jetty.version}</version>
		</dependency>
		<!-- http://wiki.eclipse.org/Jetty/Feature/NPN -->
		<dependency>
			<groupId> org.mortbay.jetty.npn</groupId>
			<artifactId>npn-boot</artifactId>
			<version>${npn-boot.version}</version>
		</dependency>


		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>slf4j-api</artifactId>
			<version>${slf4j_version}</version>
		</dependency>
		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>slf4j-log4j12</artifactId>
			<version>${slf4j_version}</version>
		</dependency>
		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>jcl-over-slf4j</artifactId>
			<version>${slf4j_version}</version>
		</dependency>


		<!-- test -->
		<dependency>
			<groupId>org.testng</groupId>
			<artifactId>testng</artifactId>
			<version>6.3.1</version>
			<scope>test</scope>
			<exclusions>
				<exclusion>
					<groupId>junit</groupId>
					<artifactId>junit</artifactId>
				</exclusion>
			</exclusions>
		</dependency>
	</dependencies>
	<repositories>
		<repository>
			<snapshots>
				<enabled>true</enabled>
			</snapshots>
			<id>sonatype-snapshots</id>
			<name>Sonatype Jetty Snapshots</name>
			<url>http://oss.sonatype.org/content/groups/jetty</url>
		</repository>
	</repositories>

	<build>
		<plugins>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-compiler-plugin</artifactId>
				<configuration>
					<source>1.7</source>
					<target>1.7</target>
				</configuration>
			</plugin>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-antrun-plugin</artifactId>
				<version>1.6</version>
				<executions>
					<execution>
						<id>1</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>run</goal>
						</goals>
						<configuration>
							<target>

								<!-- 1) Prepare directories for a clean start -->
								<delete
									dir="${project.build.directory}/jetty-distribution-${jetty.version}"
									failonerror="false" />

								<!-- 2) Download the distribution jar download.eclipse.org/jetty/9.0.3.v20130506/dist/jetty-distribution-9.0.3.v20130506.tar.gz -->
								<get
									src="http://download.eclipse.org/jetty/${jetty.version}/dist/jetty-distribution-${jetty.version}.tar.gz"
									dest="${project.build.directory}" />

								<!-- 3) Untar build and src. src will be used to build with patches 
									(if needed) -->
								<untar
									src="${project.build.directory}/jetty-distribution-${jetty.version}.tar.gz"
									dest="${project.build.directory}" compression="gzip" />

							</target>
						</configuration>
					</execution>
				</executions>
			</plugin>

			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-dependency-plugin</artifactId>
				<executions>
					<execution>
						<id>copy</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>copy</goal>
						</goals>
						<configuration>
							<!-- Full commons-logging implementation extras. http://tomcat.apache.org/tomcat-7.0-doc/logging.html 
								Can be downloaded from http://tomcat.apache.org/download-70.cgi but we want 
								to use maven to pull. -->
							<artifactItems>
								<artifactItem>
									<groupId>commons-logging</groupId>
									<artifactId>commons-logging</artifactId>
									<version>1.1.1</version>
									<outputDirectory>target/dependencies</outputDirectory>
									<destFileName>commons-logging.jar</destFileName>
								</artifactItem>
								<artifactItem>
									<groupId>org.slf4j</groupId>
									<artifactId>slf4j-api</artifactId>
									<version>${slf4j_version}</version>
									<outputDirectory>target/dependencies</outputDirectory>
									<destFileName>slf4j-api.jar</destFileName>
								</artifactItem>
								<artifactItem>
									<groupId>org.slf4j</groupId>
									<artifactId>slf4j-log4j12</artifactId>
									<version>${slf4j_version}</version>
									<outputDirectory>target/dependencies</outputDirectory>
									<destFileName>slf4j-log4j12.jar</destFileName>
								</artifactItem>
								<artifactItem>
									<groupId> org.mortbay.jetty.npn</groupId>
									<artifactId>npn-boot</artifactId>
									<version>${npn-boot.version}</version>
									<outputDirectory>target/bootclasspath</outputDirectory>
								</artifactItem>
							</artifactItems>
						</configuration>
					</execution>
				</executions>
			</plugin>
			<plugin>
				<groupId>yahoo.yinst.maven_plugins</groupId>
				<artifactId>yjava_maven_plugins_yinst</artifactId>
				<version>0.8.26</version>
				<configuration>
					<buildtype>${buildtype}</buildtype>
					<enablePom>true</enablePom>
					<editYicf>true</editYicf>
					<debug>${yicf.debug}</debug>
					<srczip>gitzip</srczip>
					<sourceDirectory>target/yicf</sourceDirectory>
					<includeJavadocs>false</includeJavadocs>
					<yicfPrepend>print &lt;&lt; 'EOF';</yicfPrepend>
					<yicfAppend>EOF</yicfAppend>
					<scopeString>compile,provided</scopeString>
				</configuration>
				<executions>
					<execution>
						<phase>package</phase>
						<goals>
							<goal>create</goal>
						</goals>
					</execution>
					<execution>
						<id>generate-yicf</id>
						<phase>prepare-package</phase>
						<goals>
							<goal>yicf</goal>
						</goals>
					</execution>
				</executions>
			</plugin>

			<plugin>
				<groupId>yahoo.yinst.maven_plugins</groupId>
				<artifactId>yjava_maven_plugins_buildyblocks</artifactId>
				<configuration>
					<skip>true</skip>
				</configuration>
			</plugin>
		</plugins>
	</build>
</project>


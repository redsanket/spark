<?xml version="1.0"?>

<!-- 3 queues
	Has A overshoot limits
	Has B work within limits
	Have C overshoot limits
	Watch A and C drain down and level off (even if it is above their configured limits)
 -->
<configuration>
  <property>
    <name>yarn.resourcemanager.scheduler.monitor.enable</name>
    <value>true</value>
  </property>
  <property>
    <name>yarn.resourcemanager.scheduler.monitor.policies</name>
    <value>org.apache.hadoop.yarn.server.resourcemanager.monitor.capacity.ProportionalCapacityPreemptionPolicy</value>
  </property>
  <property>
    <name>yarn.resourcemanager.monitor.capacity.preemption.monitoring_interval</name>
    <value>3000</value>
  </property>
  <property>
    <name>yarn.resourcemanager.monitor.capacity.preemption.max_wait_before_kill</name>
    <value>3000</value>
  </property>
  <property>
    <name>yarn.resourcemanager.monitor.capacity.preemption.total_preemption_per_round</name>
    <value>20</value>
  </property>
  
  <property>
    <name>yarn.scheduler.minimum-allocation-mb</name>
    <value>1024</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.maximum-am-resource-percent</name>
    <value>0.1</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.maximum-applications</name>
    <value>20</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.root.maximum-capacity</name>
    <value>100</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.root.capacity</name>
    <value>100</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.root.queues</name>
    <value>a,b,c,d</value>
  </property>

<!-- queue a -->
  <property>
    <name>yarn.scheduler.capacity.root.a.capacity</name>
    <value>10</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.root.a.maximum-capacity</name>
    <value>100</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.root.a.user-limit-factor</name>
    <value>5</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.root.a.minimum-user-limit-percent</name>
    <value>20</value>
  </property>

<!-- queue b -->
  <property>
    <name>yarn.scheduler.capacity.root.b.capacity</name>
    <value>40</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.root.b.maximum-capacity</name>
    <value>100</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.root.b.user-limit-factor</name>
    <value>5</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.root.b.minimum-user-limit-percent</name>
    <value>20</value>
  </property>
  
  <!-- queue c -->
  <property>
    <name>yarn.scheduler.capacity.root.c.capacity</name>
    <value>20</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.root.c.maximum-capacity</name>
    <value>100</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.root.c.user-limit-factor</name>
    <value>5</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.root.c.minimum-user-limit-percent</name>
    <value>10</value>
  </property>

  <!-- queue d -->
  <property>
    <name>yarn.scheduler.capacity.root.d.capacity</name>
    <value>30</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.root.d.maximum-capacity</name>
    <value>100</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.root.d.user-limit-factor</name>
    <value>5</value>
  </property>

  <property>
    <name>yarn.scheduler.capacity.root.d.minimum-user-limit-percent</name>
    <value>10</value>
  </property>
  
</configuration>

